<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>M&M Variedades</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }

    header {
      background-color: #4b006e;
      color: white;
      padding: 1rem;
      position: relative;
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
      text-align: center;
    }

    .cart-link {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background-color: transparent;
      color: white;
      text-decoration: none;
      font-weight: bold;
      font-size: 1rem;
    }

    #quantidade-carrinho {
      font-size: 0.9rem;
      color: white;
      background-color: #6c1a94;
      padding: 0.2rem 0.5rem;
      border-radius: 12px;
      margin-left: 5px;
    }

    .container {
      display: flex;
      margin: 2rem;
    }

    .sidebar {
      width: 250px;
      background-color: #fff;
      padding: 1rem;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin-right: 2rem;
    }

    .sidebar h2 {
      color: #4b006e;
      margin-bottom: 1rem;
    }

    .sidebar ul {
      list-style: none;
      padding: 0;
    }

    .sidebar li {
      margin-bottom: 1rem;
    }

    .main-content {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 2rem;
    justify-content: center;
    max-width: 1000px;
    margin: 0 auto;
    }



    .produto {
      background-color: white;
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .produto img {
      max-width: 100%;
      max-height: 200px;
      object-fit: contain;
      border-radius: 8px;
    }

    .produto h3 {
      color: #4b006e;
      font-size: 1.2rem;
      margin: 1rem 0 0.5rem;
    }

    .produto .descricao {
      font-size: 0.9rem;
      color: #777;
      text-align: center;
      margin-bottom: 1rem;
    }

    .produto .preco {
      color: #000000;
      font-size: 1.3rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }

    button {
      background-color: #4b006e;
      color: white;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #4b006e;
    }

    a {
      display: block;
      text-align: center;
      margin-top: 2rem;
      font-weight: bold;
      color: #4b006e;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    #toast {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background-color: #4b006e;
  color: white;
  padding: 1rem 1.5rem;
  border-radius: 8px;
  opacity: 0;
  transition: opacity 0.5s ease, bottom 0.5s ease;
  z-index: 1000;
  pointer-events: none;
}
#toast.mostrar {
  opacity: 1;
  bottom: 40px;
}

  </style>
</head>
<body>

    <header>
        <h1>M&M Variedades</h1>
        <button onclick="toggleSidebar()" style="position: absolute; top: 1rem; left: 1rem; background: transparent; border: none; color: white; font-size: 1.5rem; cursor: pointer;">â˜°</button>
        <a href="carrinho.html" class="cart-link">
          ðŸ›’ Ver Carrinho <span id="quantidade-carrinho">0</span>
        </a>
      </header>
      
      <!-- Menu flutuante de categorias -->
      <div class="sidebar" id="sidebar" style="position: fixed; top: 70px; left: -270px; width: 250px; background-color: #fff; padding: 1rem; box-shadow: 0 0 10px rgba(0,0,0,0.1); transition: left 0.3s ease; z-index: 999;">
        <h2>Categorias</h2>
        <ul style="list-style: none; padding: 0;">
          <li style="margin-bottom: 1rem;"><a href="#">Categoria 1</a></li>
          <li style="margin-bottom: 1rem;"><a href="#">Categoria 2</a></li>
          <li style="margin-bottom: 1rem;"><a href="#">Categoria 3</a></li>
          <li style="margin-bottom: 1rem;"><a href="#">AtÃ© R$50</a></li>
        </ul>
      </div>
      

    <!-- ConteÃºdo Principal -->
    <div class="main-content" id="lista-produtos"></div>
  </div>

  <script>
    const urlCSV = "https://raw.githubusercontent.com/MauricioCruzdosSantos/mm-variedades-site/main/produtos.csv";

    async function carregarProdutos() {
      const res = await fetch(urlCSV);
      const texto = await res.text();
      const linhas = texto.trim().split("\n").slice(1);
      const container = document.getElementById("lista-produtos");

      linhas.forEach(linha => {
        let [nome, descricao, preco, imagem] = linha.split(",");
        preco = preco.replace(",", ".");
        const div = document.createElement("div");
        div.className = "produto";
        div.innerHTML = `
          <img src="${imagem}" alt="${nome}" />
          <h3>${nome}</h3>
          <p class="descricao">${descricao}</p>
          <p class="preco">R$ ${preco}</p>
          <button onclick="adicionarCarrinho('${nome}', ${preco}, '${descricao}', '${imagem}')">Adicionar</button>
        `;
        container.appendChild(div);
      });
    }

    function adicionarCarrinho(nome, preco, descricao, imagem) {
  let carrinho = JSON.parse(localStorage.getItem("carrinho") || "[]");
  const index = carrinho.findIndex(item => item.nome === nome);

  if (index !== -1) {
    carrinho[index].quantidade = (carrinho[index].quantidade || 1) + 1;
  } else {
    carrinho.push({
      nome,
      preco,
      descricao,
      imagem,
      quantidade: 1
    });
  }

  localStorage.setItem("carrinho", JSON.stringify(carrinho));

  // âœ… Aqui mostra o toast:
  mostrarToast();

  // âœ… Atualiza o nÃºmero no carrinho:
  atualizarQuantidadeCarrinho();
}



function mostrarToast() {
  const toast = document.getElementById("toast");
  toast.classList.add("mostrar");
  setTimeout(() => {
    toast.classList.remove("mostrar");
  }, 2000);
}

    function atualizarQuantidadeCarrinho() {
      let carrinho = JSON.parse(localStorage.getItem("carrinho") || "[]");
      document.getElementById("quantidade-carrinho").innerText = carrinho.length;
    }

    window.onload = atualizarQuantidadeCarrinho;
    carregarProdutos();

    function toggleSidebar() {
  const sidebar = document.getElementById("sidebar");
  if (sidebar.style.left === "0px") {
    sidebar.style.left = "-270px";
  } else {
    sidebar.style.left = "0px";
  }
}
  </script>
  <div id="toast">Produto adicionado ao carrinho!</div>


</body>
</html>
